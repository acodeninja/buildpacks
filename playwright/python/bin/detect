#!/usr/bin/env bash

echo "provides = [{ name = \"playwright\" }]" > "$CNB_BP_PLAN_PATH"

if [[ -f requirements.txt && -n "$(cat requirements.txt | grep '^playwright')" ]]; then
  echo "requires = [{ name = \"site-packages\"}, { name = \"cpython\"}]" >> "$CNB_BP_PLAN_PATH"
  exit 0
fi

if [[ -f Pipfile && -n "$(cat Pipfile | grep '^playwright')" ]]; then
  echo "requires = [{ name = \"site-packages\"}, { name = \"cpython\"}]" >> "$CNB_BP_PLAN_PATH"
  exit 0
fi

echo "python-playwright: no dependency on playwright detected"

exit 100
